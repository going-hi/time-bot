name: Test SSH Connection

on: 
  workflow_dispatch

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
      - name: Test SSH
        id: ssh   # üëà –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω—É–∂–µ–Ω id!
        uses: appleboy/ssh-action@v1.0.3
        with:
          host: ${{ secrets.SERVER_HOST }}
          username: ${{ secrets.SERVER_USER }}
          password: ${{ secrets.SSH_PRIVATE_KEY }}
          script: |
            echo "‚úÖ SSH connection successful!"
            cat container_status.txt 2>/dev/null || echo "file_not_found"

      - name: Check if value was passed
        run: |
          echo "Raw stdout from SSH:"
          echo "${{ steps.ssh.outputs.stdout }}"
          # –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –¥–æ–ø.–ø–∞—Ä—Å–∏—Ç—å stdout –≤ bash

      - name: Debug SSH home
        uses: appleboy/ssh-action@v1.0.3
        with:
          host: ${{ secrets.SERVER_HOST }}
          username: ${{ secrets.SERVER_USER }}
          password: ${{ secrets.SSH_PRIVATE_KEY }}
          script: |
            echo "User: $(whoami)"
            echo "Home: $HOME"
            ls -la $HOME